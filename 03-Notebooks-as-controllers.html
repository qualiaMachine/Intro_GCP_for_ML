<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Intro to Google Cloud Platform (GCP) for Machine Learning: Notebooks as Controllers</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png"><link rel="manifest" href="favicons/incubator/site.webmanifest"><link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/03-Notebooks-as-controllers.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Intro to Google Cloud Platform (GCP) for Machine Learning
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Intro to Google Cloud Platform (GCP) for Machine Learning
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="glossary.html">Glossary</a></li><li><a class="dropdown-item" href="instances-for-ML.html">Instances for ML</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Intro to Google Cloud Platform (GCP) for Machine Learning
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 10%" class="percentage">
    10%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 10%" aria-valuenow="10" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/03-Notebooks-as-controllers.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-Introduction.html">1. Overview of Google Cloud for Machine Learning</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-Data-storage.html">2. Data Storage: Setting up GCS</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        3. Notebooks as Controllers
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#setting-up-our-notebook-environment">Setting up our notebook environment</a></li>
<li><a href="#using-the-notebook-as-a-controller">Using the notebook as a controller</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-Accessing-and-managing-data.html">4. Accessing and Managing Data in GCS with Vertex AI Notebooks</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-Interacting-with-code-repo.html">5. Using a GitHub Personal Access Token (PAT) to Push/Pull from a Vertex AI Notebook</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-Training-models-in-VertexAI.html">6. Training Models in Vertex AI: Intro</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-Training-models-in-VertexAI-GPUs.html">7. Training Models in Vertex AI: PyTorch Example</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-Hyperparameter-tuning.html">8. Hyperparameter Tuning in Vertex AI: Neural Network Example</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-Resource-management-cleanup.html">9. Resource Management &amp; Monitoring on Vertex AI (GCP)</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="glossary.html">Glossary</a></li><li><a href="instances-for-ML.html">Instances for ML</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="02-Data-storage.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="04-Accessing-and-managing-data.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="02-Data-storage.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Data Storage:
        </a>
        <a class="chapter-link float-end" href="04-Accessing-and-managing-data.html" rel="next">
          Next: Accessing and...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Notebooks as Controllers</h1>
        <p>Last updated on 2025-10-27 |

        <a href="https://github.com/qualiaMachine/Intro_GCP_VertexAI/edit/main/episodes/03-Notebooks-as-controllers.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How do you set up and use Vertex AI Workbench notebooks for machine
learning tasks?<br></li>
<li>How can you manage compute resources efficiently using a
“controller” notebook approach in GCP?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Describe how to use Vertex AI Workbench notebooks for ML
workflows.<br></li>
<li>Set up a Jupyter-based Workbench instance as a controller to manage
compute tasks.<br></li>
<li>Use the Vertex AI SDK to launch training and tuning jobs on scalable
instances.</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="setting-up-our-notebook-environment">Setting up our notebook environment<a class="anchor" aria-label="anchor" href="#setting-up-our-notebook-environment"></a></h2>
<hr class="half-width"><p>Google Cloud Workbench provides JupyterLab-based environments that
can be used to orchestrate machine learning workflows. In this workshop,
we will use a <strong>Workbench Instance</strong>—the recommended option
going forward, as other Workbench environments are being deprecated.</p>
<blockquote>
<p>Workbench Instances come with JupyterLab 3 pre-installed and are
configured with GPU-enabled ML frameworks (TensorFlow, PyTorch, etc.),
making it easy to start experimenting without additional setup. Learn
more in the <a href="https://cloud.google.com/vertex-ai/docs/workbench/instances/introduction?_gl=1*r0g0e9*_ga*MTczMzg4NDE1OC4xNzU4MzEyMTE0*_ga_WH2QY8WWF5*czE3NTg1NTczMzkkbzMkZzEkdDE3NTg1NjIxNzgkajI3JGwwJGgw" class="external-link">Workbench
Instances documentation</a>.</p>
</blockquote>
</section><section><h2 class="section-heading" id="using-the-notebook-as-a-controller">Using the notebook as a controller<a class="anchor" aria-label="anchor" href="#using-the-notebook-as-a-controller"></a></h2>
<hr class="half-width"><p>The notebook instance functions as a <em>controller</em> to manage
more resource-intensive tasks. By selecting a modest machine type (e.g.,
<code>n1-standard-4</code>), you can perform lightweight operations
locally in the notebook while using the <strong>Vertex AI Python
SDK</strong> to launch compute-heavy jobs on larger machines (e.g.,
GPU-accelerated) when needed.</p>
<p>This approach minimizes costs while giving you access to scalable
infrastructure for demanding tasks like model training, batch
prediction, and hyperparameter tuning.</p>
<p>We will follow these steps to create our first Workbench
Instance:</p>
<div class="section level3">
<h3 id="navigate-to-workbench">1. Navigate to Workbench<a class="anchor" aria-label="anchor" href="#navigate-to-workbench"></a></h3>
<ul><li>In the Google Cloud Console, search for “Workbench.”<br></li>
<li>Click the “Instances” tab (this is the supported path going
forward).<br></li>
<li>Pin Workbench to your navigation bar for quick access.</li>
</ul></div>
<div class="section level3">
<h3 id="create-a-new-workbench-instance">2. Create a new Workbench Instance<a class="anchor" aria-label="anchor" href="#create-a-new-workbench-instance"></a></h3>
<div class="section level4">
<h4 id="initial-settings">Initial settings<a class="anchor" aria-label="anchor" href="#initial-settings"></a></h4>
<ul><li>Click <strong>Create New</strong> near the top of the Workbench
page</li>
<li>
<strong>Name</strong>: For this workshop, we can use the following
naming convention to easily locate our notebooks:
<code>teamname-yourname-purpose</code> (e.g.,
sinkorswim-johndoe-train)</li>
<li>
<strong>Region</strong>: Choose the same region as your storage
bucket (e.g., <code>us-central1</code>). This avoids cross-region
transfer charges and keeps data access latency low.
<ul><li>If you are unsure, check your bucket’s location in the Cloud Storage
console (click the bucket name → look under “Location”).</li>
</ul></li>
<li>
<strong>Zone:</strong> <code>us-central1-a</code> (or another zone
in <code>us-central1</code>, like <code>-b</code> or <code>-c</code>)
<ul><li>If capacity or GPU availability is limited in one zone, switch to
another zone in the same region.</li>
</ul></li>
<li>
<strong>NVIDIA T4 GPU:</strong> Leave unchecked for now
<ul><li>We will request GPUs for training jobs separately. Attaching here
increases idle costs.</li>
</ul></li>
<li>
<strong>Apache Spark and BigQuery Kernels:</strong> Leave unchecked
<ul><li>Enable only if you specifically need Spark or BigQuery notebooks;
otherwise, it adds unnecessary images.</li>
</ul></li>
<li>
<strong>Network in this project:</strong> Required selection
<ul><li>This option must be selected; shared environments do not allow using
external or default networks.<br></li>
<li>This ensures your instance connects to the shared VPC for the
workshop.</li>
</ul></li>
<li>
<strong>Network / Subnetwork:</strong> Leave as pre-filled. <img src="https://raw.githubusercontent.com/qualiaMachine/Intro_GCP_for_ML/main/images/new-instance-settings1.jpg" alt="Notebook settings (part1)" class="figure"></li>
</ul></div>
<div class="section level4">
<h4 id="advanced-settings-details-tagging">Advanced settings: Details (tagging)<a class="anchor" aria-label="anchor" href="#advanced-settings-details-tagging"></a></h4>
<ul><li>
<strong>IMPORTANT:</strong> Open the “Advanced optoins menu next
<ul><li>
<strong>Labels (required for cost tracking):</strong> Under the
Details menu, add the following tags (all lowercase) so that you can
track the total cost of your activity on GCP later:
<ul><li>
<code>project = teamname</code> (your team’s name)</li>
<li>
<code>name = name</code> (firstname-lastname)</li>
<li>
<code>purpose = train</code> (i.e., the notebook’s overall purpose —
train, tune, RAG, etc.)</li>
</ul></li>
</ul></li>
</ul><figure><img src="https://raw.githubusercontent.com/qualiaMachine/Intro_GCP_for_ML/main/images/new-instance-tags.jpg" alt="Screenshot showing required tags for notebook" class="figure mx-auto d-block"><div class="figcaption">Required tags for notebook.</div>
</figure></div>
<div class="section level4">
<h4 id="advanced-settings-environment">Advanced Settings: Environment<a class="anchor" aria-label="anchor" href="#advanced-settings-environment"></a></h4>
<p>While we won’t modify environment settings during this workshop, it’s
useful to understand what these options control when creating or editing
a Workbench Instance in Vertex AI Workbench.</p>
<p>All Workbench environments use JupyterLab 3 by default, with the
latest NVIDIA GPU drivers, CUDA libraries, and Intel optimizations
preinstalled. You can optionally select JupyterLab 4 (currently in
preview) or provide a custom container image to run your own environment
(for example, a Docker image containing specialized ML frameworks or
dependencies). If needed, you can also specify a post-startup script
stored in Cloud Storage (<code>gs://path/to/script.sh</code>) to
automatically configure the instance (install packages, mount buckets,
etc.) when it boots.</p>
<p>See: <a href="https://cloud.google.com/vertex-ai/docs/release-notes" class="external-link">Vertex AI
Workbench release notes</a> for supported versions and base images.</p>
</div>
<div class="section level4">
<h4 id="advanced-settings-machine-type">Advanced settings: Machine Type<a class="anchor" aria-label="anchor" href="#advanced-settings-machine-type"></a></h4>
<ul><li>
<strong>Machine type</strong>: Select a small machine (e.g.,
<code>e2-standard-2</code>) to act as the controller.
<ul><li>This keeps costs low while you delegate heavy lifting to training
jobs.<br></li>
<li>For guidance on common machine types for ML, refer to <a href="instances-for-ML.html">Instances for ML on GCP</a>.</li>
</ul></li>
<li>
<strong>Set idle shutdown</strong>: To save on costs when you aren’t
doing anything in your notebook, lower the default idle shutdown time to
<strong>60 (minutes)</strong>.</li>
</ul><figure><img src="https://raw.githubusercontent.com/qualiaMachine/Intro_GCP_for_ML/main/images/new-instance-idleshutdown.jpg" alt="Set Idle Shutdown" class="figure mx-auto d-block"><div class="figcaption">Enable Idle Shutdown</div>
</figure></div>
<div class="section level4">
<h4 id="advanced-settings-disks">Advanced Settings: Disks<a class="anchor" aria-label="anchor" href="#advanced-settings-disks"></a></h4>
<p>Each Vertex AI Workbench instance uses <strong>Persistent Disks
(PDs)</strong> to store your system files and data. You’ll configure two
disks when creating a notebook: a <strong>boot disk</strong> and a
<strong>data disk</strong>. We’ll leave these at their default settings,
but it’s useful to understand the settings for future work.</p>
<div class="section level5">
<h5 id="boot-disk">Boot Disk<a class="anchor" aria-label="anchor" href="#boot-disk"></a></h5>
<p>Keep this fixed at <strong>100 GB (Balanced PD)</strong> — the
default minimum.<br>
It holds the OS, JupyterLab, and ML libraries but not your
datasets.<br>
Estimated cost: about <strong>$10 / month (~$0.014 / hr)</strong>.<br>
You rarely need to resize this, though you can increase to
<strong>150–200 GB</strong> if you plan to install large environments,
custom CUDA builds, or multiple frameworks.</p>
</div>
<div class="section level5">
<h5 id="data-disk">Data Disk<a class="anchor" aria-label="anchor" href="#data-disk"></a></h5>
<p>This is where your datasets, checkpoints, and outputs live.<br>
Use a <strong>Balanced PD</strong> by default, or an <strong>SSD
PD</strong> only for high-I/O workloads.<br>
A good rule of thumb is to allocate <strong>≈ 2× your dataset
size</strong>, with a <strong>minimum of 150 GB</strong> and a
<strong>maximum of 1 TB</strong>.<br>
For example: - 20 GB dataset → 150 GB data disk (minimum)<br>
- 100 GB dataset → 200 GB data disk<br>
- Larger datasets → keep the full dataset in <strong>Cloud Storage
(<code>gs://</code>)</strong> and copy only subsets locally.</p>
<blockquote>
<p>Persistent Disks can be resized anytime without downtime, so it’s
best to start small and expand when needed.</p>
</blockquote>
</div>
<div class="section level5">
<h5 id="deletion-behavior">Deletion behavior<a class="anchor" aria-label="anchor" href="#deletion-behavior"></a></h5>
<p>The ‘Delete to trash’ option is <strong>unchecked by
default</strong>, which is what you want.<br>
When left unchecked, deleted files are removed immediately, freeing up
disk space right away.<br>
If you check this box, files will move to the system trash instead —
meaning they still take up space (and cost) until you empty it.</p>
<blockquote>
<p><strong>Keep this unchecked</strong> to avoid paying for deleted
files that remain in the trash.</p>
</blockquote>
</div>
<div class="section level5">
<h5 id="cost-awareness">Cost awareness<a class="anchor" aria-label="anchor" href="#cost-awareness"></a></h5>
<p>Persistent Disks are fast but cost more than Cloud Storage.<br>
Typical rates:<br>
- <strong>Balanced PD:</strong> ~$0.10–$0.12 / GB / month<br>
- <strong>SSD PD:</strong> ~$0.17–$0.20 / GB / month<br>
- <strong>Cloud Storage (Standard):</strong> ~$0.026 / GB / month</p>
<blockquote>
<p><strong>Rule of thumb:</strong> use PDs only for active work; store
everything else in Cloud Storage.<br>
Example: a 200 GB dataset costs <strong>~$24/month on a PD</strong> but
only <strong>~$5/month in Cloud Storage</strong>.</p>
</blockquote>
<p>Check the latest pricing here:<br>
- <a href="https://cloud.google.com/compute/disks-image-pricing" class="external-link">Persistent
Disk &amp; Image pricing</a><br>
- <a href="https://cloud.google.com/storage/pricing" class="external-link">Cloud Storage
pricing</a></p>
</div>
</div>
<div class="section level4">
<h4 id="advanced-settings-networking---remove-external-ip-access">Advanced settings: Networking - Remove External IP Access<a class="anchor" aria-label="anchor" href="#advanced-settings-networking---remove-external-ip-access"></a></h4>
<ul><li>
<em>Don’t</em> <strong>Assign External IP address</strong>: Uncheck
this option
<ul><li>This ensures your instance is only accessible through secure
internal channels rather than the open internet.<br></li>
<li>Removing the external IP reduces your attack surface and aligns with
campus cybersecurity guidance.</li>
</ul></li>
</ul><figure><img src="https://raw.githubusercontent.com/qualiaMachine/Intro_GCP_for_ML/main/images/new-instance-networking.jpg" alt="Remove External IP" class="figure mx-auto d-block"><div class="figcaption">Remove External IP</div>
</figure><blockquote>
<p><strong>Note:</strong> Managed Workbench instances do not allow you
to modify network settings after creation. Be sure to complete this step
or you may need to delete the instance and recreate one from
scratch.</p>
</blockquote>
</div>
</div>
<div class="section level3">
<h3 id="create-notebook">Create notebook<a class="anchor" aria-label="anchor" href="#create-notebook"></a></h3>
<ul><li>Click <strong>Create</strong> to create the instance. Your notebook
instance will start in a few minutes. When its status is “Running,” you
can open JupyterLab and begin working.</li>
</ul></div>
<div class="section level3">
<h3 id="managing-training-and-tuning-with-the-controller-notebook">Managing training and tuning with the controller notebook<a class="anchor" aria-label="anchor" href="#managing-training-and-tuning-with-the-controller-notebook"></a></h3>
<p>In the following episodes, we will use the <strong>Vertex AI Python
SDK (<code>google-cloud-aiplatform</code>)</strong> from this notebook
to submit compute-heavy tasks on more powerful machines. Examples
include:</p>
<ul><li>Training a model on a GPU-backed instance.<br></li>
<li>Running hyperparameter tuning jobs managed by Vertex AI.</li>
</ul><p>This pattern keeps costs low by running your notebook on a modest VM
while only incurring charges for larger resources when they are actively
in use.</p>
<div id="challenge-notebook-roles" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge-notebook-roles" class="callout-inner">
<h3 class="callout-title">Challenge: Notebook Roles</h3>
<div class="callout-content">
<p>Your university provides different compute options: laptops, on-prem
HPC, and GCP.</p>
<ul><li>What role does a <strong>Workbench Instance notebook</strong> play
compared to an HPC login node or a laptop-based JupyterLab?<br></li>
<li>Which tasks should stay in the notebook (lightweight control,
visualization) versus being launched to larger cloud resources?</li>
</ul></div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The notebook serves as a lightweight control plane.<br>
- Like an HPC login node, it is not meant for heavy computation.<br>
- Suitable for small preprocessing, visualization, and orchestrating
jobs.<br>
- Resource-intensive tasks (training, tuning, batch jobs) should be
submitted to scalable cloud resources (GPU/large VM instances) via the
Vertex AI SDK.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="load-pre-filled-jupyter-notebooks">Load pre-filled Jupyter notebooks<a class="anchor" aria-label="anchor" href="#load-pre-filled-jupyter-notebooks"></a></h3>
<p>Once your newly created <em>instance</em> shows as
<code>Active</code> (green checkmark), click <strong>Open
JupyterLab</strong> to open the instance in Jupyter Lab. From there, we
can create as many Jupyter notebooks as we would like within the
instance environment.</p>
<p>We will then select the standard python3 environment to start our
first .ipynb notebook (Jupyter notebook). We can use this environment
since we aren’t doing any training/tuning just yet.</p>
<p>Within the Jupyter notebook, run the following command to clone the
lesson repo into our Jupyter environment:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">!git</span> clone https://github.com/qualiaMachine/Intro_GCP_for_ML.git</span></code></pre>
</div>
<p>Then, navigate to
<code>/Intro_GCP_for_ML/notebooks/04-Accessing-and-managing-data.ipynb</code>
to begin the first notebook.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>Use a small Workbench Instance notebook as a controller to manage
larger, resource-intensive tasks.<br></li>
<li>Always navigate to the “Instances” tab in Workbench, since older
notebook types are deprecated.<br></li>
<li>Choose the same region for your Workbench Instance and storage
bucket to avoid extra transfer costs.<br></li>
<li>Submit training and tuning jobs to scalable instances using the
Vertex AI SDK.<br></li>
<li>Labels help track costs effectively, especially in shared or
multi-project environments.<br></li>
<li>Workbench Instances come with JupyterLab 3 and GPU frameworks
preinstalled, making them an easy entry point for ML workflows.<br></li>
<li>Enable idle auto-stop to avoid unexpected charges when notebooks are
left running.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="02-Data-storage.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="04-Accessing-and-managing-data.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="02-Data-storage.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Data Storage:
        </a>
        <a class="chapter-link float-end" href="04-Accessing-and-managing-data.html" rel="next">
          Next: Accessing and...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/qualiaMachine/Intro_GCP_VertexAI/edit/main/episodes/03-Notebooks-as-controllers.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/qualiaMachine/Intro_GCP_VertexAI/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/qualiaMachine/Intro_GCP_VertexAI/" class="external-link">Source</a></p>
				<p><a href="https://github.com/qualiaMachine/Intro_GCP_VertexAI/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:endemann@wisc.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://qualiaMachine.github.io/Intro_GCP_VertexAI/03-Notebooks-as-controllers.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "cloud, GCP, lesson, The Carpentries, ML, AI, GPU",
  "name": "Notebooks as Controllers",
  "creativeWorkStatus": "active",
  "url": "https://qualiaMachine.github.io/Intro_GCP_VertexAI/03-Notebooks-as-controllers.html",
  "identifier": "https://qualiaMachine.github.io/Intro_GCP_VertexAI/03-Notebooks-as-controllers.html",
  "dateCreated": "2025-08-26",
  "dateModified": "2025-10-27",
  "datePublished": "2025-10-27"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

